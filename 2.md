# DynamoDB

DynamoDB is a NoSQL database like redis

It offers the auto deletion of Expired Items. Items may have a Time-to-live (TTL) property attached to them.
It also offers the auto-distribution of Data & Load.
It offers a predictable response (regardless of volume of stored data)

## Core Components of DDB
1. Tables
1. Items
1. Attributes
1. Primary Key
1. Secondary indices
1. Streams

### Secondary Indices
There are 2 types of secondary indices offered by DDB:
1. Global Secondary Indices (GSI). Where both the Partition key & Sort key are different to those on the underlying table
1. Local Secondary Indices (LSI). Where the Same Partition key as the table is used along with a different sort key (to that on the table.)


### DynamoDB Streams
These capture modification events within DDB tables. Inserts/Updates and Deletes all create a Stream record when they occur. Stream records have a 24hour lifespan. A combination of Streams and Lambda could be used to create Triggers.

## DynamoDB API
There are 3 categories of APIs:

1. Control Plane APIs:
  * CreateTable
  * DescribeTable
  * ListTables
  * UpdateTable
1. Data Plane APIs: Further subdivided into **C**reate**R**etrieve**U**pdate**D**elete
  * PutItem (**C**)
  * BatchWriteItem (**C**)
  * GetItem (**R**)
  * BatchGetItem (**R**)
  * Query (**R**)
  * Scan (**R**)
  * UpdateItem (**U**)
  * DeleteItem (**D**)
  * BatchWrite (**D**). Limited to 25 Items at a time
1. Streams Plane:
  * ListStrams
  * DescribeStream
  * GetSharedIterators
  * GetRecords (get streams records using a shared iterator)

## Data Types
There are 3 categories of types:
1. Scalar
  * Number
  * String
  * Binary
  * Boolean
  * Null
1. Document
  * List [..., ..., ...]
  * Map {   }
1. Set []. A List comprising of unique members. **How does one distinguish between a SEt and an incidental List comprising of Unique members?**

## Read Consistency
1. Eventual Consistent Reads (the default)
1. Strong Consistent Reads 

are both supported

## Throughput Capacity for Read and Writes
Capacity requirements for both Reads and Writes to a Table are specified at Index Creation Time. The measure used are called:
1. Read Capacity Unit
1. Write Capacity Unit

If Read or Write requests against an index exceeed those that were set within the settings  


## Backup and Restoration Capabilities of DynamoDB (DDB)

As of Nov 2017, Amazon launched ["DynamoDB Backup and Restore"](https://aws.amazon.com/about-aws/whats-new/2017/11/aws-launches-amazon-dynamodb-backup-and-restore/).

The new backup feature is tagged _"On-Demand Backup"_.  Backups and Restorations may be initiated either via the Management Console or via the AWS CLI.

In summary, the properties of this new feature are:
1. The backups do not consume any throughput on the backed up table
1. The backups are created asynchronously (to other activities like reads & write) against the Table.
1. The level of granularity of the backups is the complete Table (during On-demand backups)
1. DDB backups do NOT guarantee casual consistency across table items within the backup
1. On-Demand Backups include the following:
   * Global Secondary Indexes(GSI),
   * Local Secondary Indexes,
   * Streams,
   * provisioned read and write capacity.
1. (As of the time of writing,) Backups & Restores may ONLY be performed in the same region as the source Table{s).
1. Restorations DO NOT overwrite existing tables.

Upon Restoration, GSIs are auto restored. Manual setup of the following are required after a restoration of a DDB Table.
1. Auto-scaling Policies
1. IAM policies used to enforce Table items' authorization
1. CloudWatch Metrics and Alarms setup to Monitor the Table
1. Tags against the Table
1. Table Stream Settings
1. Time to Live (TTL) settings

The scheduling of Backups and Restorations may be achieved with the aid of the AWS Lambda service.

As of Jan 2018, one may opt-in to a new _"DynamoDB Point-in-Time Restore (PITR)"_ capability of the DDB. This will (allegedly) allow one to restore one's data up to the minute for the past 35 days.
